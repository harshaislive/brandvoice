/* Mobile Chat UI Enhancements */

/* Safe area utilities for mobile devices */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom);
}

.pb-safe-offset-4 {
  padding-bottom: calc(1rem + env(safe-area-inset-bottom));
}

/* Prevent text selection on mobile for better UX */
@media (max-width: 768px) {
  .chat-messages-container {
    -webkit-user-select: none;
    user-select: none;
  }
  
  .chat-messages-container * {
    -webkit-user-select: text;
    user-select: text;
  }
}

/* Enhanced scroll behavior for mobile */
.chat-messages-container {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Improved touch targets for mobile */
@media (max-width: 768px) {
  button, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Exception for small action buttons */
  .sidebar-menu-action {
    min-height: 32px;
    min-width: 32px;
  }
}

/* Mobile keyboard handling */
@media (max-width: 768px) {
  /* Ensure chat input remains visible when keyboard appears */
  .mobile-input-container {
    position: sticky;
    bottom: 0;
    z-index: 50;
  }
  
  /* Adjust viewport height for mobile browsers */
  .h-screen {
    height: 100vh;
    height: 100dvh;
  }
}

/* Mobile sidebar overlay */
@media (max-width: 768px) {
  .sidebar[data-state="open"] {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    height: 100dvh;
    z-index: 50;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  }
}

/* Improved focus states for mobile */
@media (max-width: 768px) {
  *:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    border-radius: 6px;
  }
}

/* Optimize animations for mobile performance */
@media (max-width: 768px) {
  * {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
  
  .animate-spin {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

/* Enhanced textarea behavior on mobile */
@media (max-width: 768px) {
  textarea {
    /* Prevent zoom on focus */
    font-size: 16px !important;
    
    /* Improve touch scroll */
    -webkit-overflow-scrolling: touch;
  }
}

/* Mobile message spacing */
@media (max-width: 768px) {
  .chat-message {
    margin-bottom: 0.75rem;
  }
  
  .chat-message:last-child {
    margin-bottom: calc(1rem + env(safe-area-inset-bottom));
  }
}

/* Responsive sidebar trigger */
@media (min-width: 768px) {
  .sidebar-trigger-mobile-only {
    display: none;
  }
}

/* Mobile-first container queries */
@container (max-width: 768px) {
  .chat-container {
    padding: 0.5rem;
  }
  
  .message-container {
    max-width: 100%;
    padding: 0.75rem;
  }
}

/* Dark mode mobile optimizations */
@media (prefers-color-scheme: dark) and (max-width: 768px) {
  .chat-messages-container {
    background: rgb(0 0 0 / 0.95);
  }
}

/* Reduce motion for mobile users who prefer it */
@media (prefers-reduced-motion: reduce) {
  .sidebar,
  .chat-messages-container *,
  .mobile-input-container * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}